<h1>投稿一覧</h1>

<p>
  <!--タグリスト-->
  タグ一覧：
  <% @tag_list.each do |list|%>
    <%=link_to list.name,search_tag_path(tag_id: list.id) %>
    <%="(#{list.posts.count})" %>
  <% end %>
</p>

<div class="card-list-container pt-3 pb-5 mb-5">
  <% @posts.each do |post| %>
    <div class="card w-50 mx-auto mt-4 shadow-lg">
      <%#= link_to post_path(post.id) do %>
        <%#= image_tag post.get_image, size: '200x200', class:"card-img-top"; %>
      <%# end %>
        <div class="pt-3 card-body">
          <div class="row">
            <div class="col-1"><!--投稿ユーザー画像-->
              <%= image_tag post.user.get_profile_image, size: '50x50', class:"rounded-circle" %>
            </div>
            <div class="col-11">
              <span><i class="fas fa-user"></i> By <%= post.user.user_name %></span><br>
              <small>
                <%= post.created_at.strftime('%Y年%m月%d日 %H:%M:%S') %>
              </small>
              <h3 class="card-title">
                <%= link_to post_path(post.id), class:"text-dark" do %>
                  <strong><%= post.title %></span></strong>
                <% end %>
              </h3>
              <span class="pr-3">
                <i class="fas fa-tag"></i>
                <%#=link_to list.name, search_tag_path(tag_id: list.id), class:"text-dark" %>
                 タグ：<%= post.tags.map(&:name).join(' , ') %>
                <%# @tag_list.map do |list| %>
                  <%#=link_to list.name, search_tag_path(tag_id: list.id), class:"text-dark" %>
                <%# end %>
              </span>
              <span class="pr-3">
                <i class="fas fa-comment"></i>
                <%= link_to "#{post.post_comments.count} コメント", post_path(post.id), class:"text-dark" %>
              </span>
              <span>
                <i class="fas fa-heart"></i>
                <%= post.favorites.count %>
              </span>
            </div>
          </div>
        </div>
    </div>

  <% end %>

</div>

<%= paginate @posts %>