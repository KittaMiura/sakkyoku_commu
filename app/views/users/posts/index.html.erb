<h1>投稿一覧</h1>

<p>
  <!--タグリスト-->
  タグ一覧：
  <% @tag_list.each do |list|%>
    <%=link_to list.name,search_tag_path(tag_id: list.id) %>
    <%="(#{list.posts.count})" %>
  <% end %>
</p>

<div class="card-deck col-12">
	<div class="row">
    <% @posts.each do |post| %>
  		<div class="col-sm-3 mt-4">
  			<div class="card h-100">
  				<%= link_to post_path(post.id) do %>
          <%= image_tag post.get_image, size: '200', class:"card-img-top"; %>
          <% end %>
  				<div class="card-body">
  					<h2 class="card-title"><%= link_to post_path(post.id), class:"text-dark" do %><strong><%= post.title %></span></strong><% end %></h2>
  					<%= link_to profile_path(post.user.id), class:"text-dark" do %>
              <%= image_tag post.user.get_profile_image, size: '40x40', class:"rounded-circle" %>
                <span><%= post.user.user_name %></span><br>
            <% end %>
  				</div>
  			</div>
  		</div>
    <% end %>
	</div>
</div>

<div class="card-deck pt-3 pb-5 mb-5">
  <div class="row">


    <div class="col-sm-4">
      <% @posts.each do |post| %>
      <div class="card h-100 shadow-lg">
      <%= link_to post_path(post.id) do %>
        <%= image_tag post.get_image, size: '200', class:"card-img-top"; %>
      <% end %>
        <div class="pt-3 card-body">

          <div class="row">
            <div class="col-1"><!--投稿ユーザー画像-->

            </div>
            <div class="col-10">
              <%= link_to profile_path(post.user.id), class:"text-dark" do %>
                <span><i class="fas fa-user"></i> <%= post.user.user_name %></span><br>
              <% end %>
              <small>
                <%= post.created_at.strftime('%Y年%m月%d日 %H:%M:%S') %>
              </small>
              <h3 class="card-title">
                <%= link_to post_path(post.id), class:"text-dark" do %>
                  <strong><%= post.title %></span></strong>
                <% end %>
              </h3>
              <span class="pr-3">
                <i class="fas fa-tag"></i>
                <%#=link_to list.name, search_tag_path(tag_id: list.id), class:"text-dark" %>
                 タグ：<%= post.tags.map(&:name).join(' , ') %>
                <%# @tag_list.map do |list| %>
                  <%#=link_to list.name, search_tag_path(tag_id: list.id), class:"text-dark" %>
                <%# end %>
              </span>
              <span class="pr-3">
                <i class="fas fa-comment"></i>
                <%= link_to "#{post.post_comments.count} コメント", post_path(post.id), class:"text-dark" %>
              </span>
              <span>
                <i class="fas fa-heart"></i>
                <%= post.favorites.count %>
              </span>
            </div>
          </div>
        </div>
    </div>
  <% end %>
  </div>


  </div>
</div>

<%= paginate @posts %>
